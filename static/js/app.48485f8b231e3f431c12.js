webpackJsonp([1,0],[function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=s(2),n=o(i),a=s(4),c=o(a),r=s(17),l=o(r),d=s(40),p=o(d),u=s(43),f=o(u),v=s(46),h=o(v),m=s(45),x=o(m);s(5),n.default.use(c.default),n.default.use(l.default);var g=n.default.extend(p.default),y=new c.default({linkActiveClass:"active"});y.map({"/goods":{component:f.default},"/seller":{component:h.default},"/ratings":{component:x.default}}),y.start(g,"#app"),y.go("/goods")},,,function(t,e,s){var o,i,n={};s(7),o=s(30),i=s(19),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e){t.exports=' <div> <v-header :seller=seller></v-header> <div class="tab border-1px"> <div class=tab-item><a v-link="{path:\'/goods\'}">商品</a></div> <div class=tab-item><a v-link="{path:\'/ratings\'}">评价</a></div> <div class=tab-item><a v-link="{path:\'/seller\'}">商家</a></div> </div> <router-view :seller=seller></router-view> </div> '},function(t,e){t.exports=' <div class=cartcontrol> <div class=decrease v-show="food.count>0" @click.stop.prevent=decreaseCount transition=move> <span class="inner icon-remove_circle_outline"></span> </div> <div class=cartCount v-show="food.count>0">{{food.count}}</div> <div class="cartAdd icon-add_circle" @click.stop.prevent=addCount></div> </div> '},function(t,e){t.exports=" <div class=foodRate> <div class=ratingType> <span class=positive :class=\"{'active':this.selectType === 2}\" @click=select(2,$event)>{{desc.all}}<span class=count>{{ratings.length}}</span></span> <span class=positive :class=\"{'active':this.selectType === 0}\" @click=select(0,$event)>{{desc.nagetive}}<span class=count>{{negative.length}}</span></span> <span class=negative :class=\"{'active':this.selectType === 1}\" @click=select(1,$event)>{{desc.positive}}<span class=count>{{positive.length}}</span></span> </div> <div class=switch> <i @click=switch class=icon-check_circle :class=\"{'on':this.contentSwitch === true}\"></i><span>只看有内容的评价</span> </div> </div> "},function(t,e){t.exports=' <div class=food v-show=showGood transition=leftIn v-el:food> <div class=food-content> <div class=imgContainer> <img :src=food.image> <div class="back icon-arrow_lift" @click=back> </div> </div> <div class="tiltle-message pad-18"> <div class=name>{{food.name}}</div> <div class=sellNum><span>月售{{food.sellCount}}份</span><span>好评率{{food.rating}}%</span></div> <div class=priceGroup> <div class=left> <span class=now><span>￥</span>{{food.price}}</span> <span class=old v-show=food.oldPrice><span>￥</span>{{food.oldPrice}}</span> </div> <div class=cartcontrol-wrapper><cartcontrol :food=food></cartcontrol></div> <div class=addToCart v-show="!food.count||food.count===0" @click.stop.prevent=addCount transition=fade>加入购物车</div> </div> </div> <split></split> <div class="food-introduce pad-18"> <div class=title>商品介绍</div> <div class=info>{{food.info}}</div> </div> <split></split> <div class=ratings> <h1 class=title>商品评价</h1> <food-rate :desc=desc :select-type=selectType :content-switch=contentSwitch :ratings=food.ratings></food-rate> <div class=rating-list> <ul v-if="food.ratings && food.ratings.length"> <li v-for="rating in food.ratings" class=Ratelist v-show=showLish(rating.rateType,rating.text)> <div class=rate-time>{{rating.rateTime}}</div> <div class=rate-content><i :class="{\'icon-thumb_up\':rating.rateType === 0,\'icon-thumb_down\':rating.rateType ===1}"></i><span class=text>{{rating.text}}</span></div> <div class=avatar> <span class=username>{{rating.username}}</span> <img :src=rating.avatar> </div> </li> </ul> <div v-if="!food.ratings || !food.ratings.length "> 暂无评论 </div> </div> </div> </div> </div> '},function(t,e){t.exports=' <div class=goods> <div class=menu-wrapper v-el:menu-wrapper> <ul> <li v-for="item in goods" class=menu-item :class="{\'current\':currentIndex === $index}" @click=selectMenu($index,$event)> <span class="text border-1px"><span v-show="item.type>0" class=icon :class=classMap[item.type]></span>{{item.name}}</span> </li> </ul> </div> <div class=food-wrapper v-el:food-wrapper> <ul> <li v-for="item in goods" class="menu-item-title food-list-hook"> <h1 class="title border-2px">{{item.name}}</h1> <ul> <li v-for="food in item.foods" class="no-title-li border-1px" @click=selectGood(food,$event)> <div class=li-wrapper> <img :src=food.icon width=57 height=57> </div> <div class=food-text-item> <h2>{{food.name}}</h2> <span class=description v-show=food.description>{{food.description}}</span><br> <span class=sell-number>月售{{food.sellCount}}份</span><span class=ratings>好评率{{food.rating}}%</span> <div class=price-wrapper> <span class=price>¥ {{food.price}}</span><span class=old-price v-show=food.oldPrice>¥{{food.oldPrice}}</span> <div class=cartcontrol-wrapper> <cartcontrol :food=food></cartcontrol> </div> </div> </div> </li> </ul> </li> </ul> </div> <shopcart :min-price=seller.minPrice :delivery-price=seller.deliveryPrice :select-foods=selectFoods v-ref:shopcart></shopcart> </div> <food :food=selectedFood v-ref:food></food> '},function(t,e){t.exports=' <div class=header> <div class=content-wrapper> <div class=avatar> <img :src=seller.avatar width=64 height=64> </div> <div class=content> <div class=title> <span class=brand></span> <span class=name>{{seller.name}}</span> </div> <div class=description> <span>{{seller.description}}/{{seller.deliveryTime}}分钟送达</span> </div> <div v-if=seller.supports class=supports> <span class=icon :class=classMap[seller.supports[0].type]></span> <span class=text>{{seller.supports[0].description}}</span> </div> </div> <div class=supports-count v-if=seller.supports @click=showDetail> <span class=text>{{seller.supports.length}}个</span> <i class=icon-keyboard_arrow_right></i> </div> </div> <div class=bulletin-wrapper @click=showDetail> <span class=icon></span><span class=bulletin>{{seller.bulletin}}</span><i class=icon-keyboard_arrow_right></i> </div> <div class=background><img :src=seller.avatar width=100% height=100%></div> <div class=detail v-show=detailShow transition=fade> <div class="detail-wrapper clearfix"> <div class=detail-main> <h1>{{seller.name}}</h1> <div class=star-wrapper> <star :size=48 :score=seller.score></star> </div> <div class=title> <div class=line></div> <div class=text>优惠信息</div> <div class=line></div> </div> <ul v-if=seller.supports class=supports> <li class=support-item v-for="item in seller.supports"> <span class=icon :class=classMap[seller.supports[$index].type]></span> <span class=text>{{seller.supports[$index].description}}</span> </li> </ul> <div class=title> <div class=line></div> <div class=text>商家公告</div> <div class=line></div> </div> <div class=bulletin><div>{{seller.bulletin}}</div></div> </div> </div> <div class=detail-close><i class=icon-close @click=closeDetail></i></div> </div> </div> '},function(t,e){t.exports=" <div> I am ratings </div> "},function(t,e){t.exports=" <div> I am seller </div> "},function(t,e){t.exports=' <div class=shopcart> <div class=content @click=toggleCart> <div class=content-left> <div class=logo-wrapper> <div class=logo :class="{\'highLight\':totalCount>0}"> <i class=icon-shopping_cart :class="{\'highLight\':totalCount>0}"></i> </div> <div class=num v-show="totalCount>0">{{totalCount}}</div> </div> <div class=price :class="{\'highLight\':totalPrice>0}">￥{{totalPrice}}</div> <div class=desc>另需配送费¥{{deliveryPrice}}元</div> </div> <div class=content-right> <div class=pay @click.stop.prevent=pay :class=payState> {{payPrice}} </div> </div> </div> <div class=ball-container> <div transition=drop v-for="ball in balls" v-show=ball.show class=ball> <div class="inner ball-hook"></div> </div> </div> <div class=cart-list v-show=showList transition=toggle> <div class=cart-title> <h1 class=title>购物车</h1> <span class=empty @click=empty>清空</span> </div> <div class=cart-content v-el:list-element> <ul> <li class=food v-for="food in selectFoods"> <span class=food-name>{{food.name}}</span> <div class=foodPrice><span class=moneyLogo>¥</span> {{food.price*food.count}}</div> <div class=cartcontrol-wrapper> <cartcontrol :food=food></cartcontrol> </div> </li> </ul> </div> </div> </div> <div class=mask @click=closeMask v-show=showList transition=fade></div> '},function(t,e){t.exports=" <div class=split></div> "},function(t,e){t.exports=' <div class=star :class=starType> <span v-for="itemClass in itemClasses" :class=itemClass class=star-item track-by=$index></span> </div> '},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(44),n=o(i),a=0;e.default={data:function(){return{seller:{}}},components:{"v-header":n.default},created:function(){var t=this;this.$http.get("/api/seller").then(function(e){e=e.body,e.errno===a&&(t.seller=e.data)})}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(2),n=o(i);e.default={props:{food:{type:Object}},methods:{addCount:function(t){t._constructed&&(this.food.count?this.food.count++:n.default.set(this.food,"count",1),this.$dispatch("cart.add",t.target))},decreaseCount:function(t){t._constructed&&0!=this.food.count&&this.food.count--}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=0,o=1,i=2;e.default={props:{ratings:{type:Array,default:function(){return[]}},selectType:{type:Number,default:i},contentSwitch:{type:Boolean,default:!0},desc:{type:Object,default:function(){return{all:"全部",nagetive:"不满意",positive:"满意"}}}},methods:{select:function(t,e){e._constructed&&(this.selectType=t,this.$dispatch("ratingType.select",t))},switch:function(t){t._constructed&&(this.contentSwitch=!this.contentSwitch,this.$dispatch("contentSwitch.select",this.contentSwitch))}},computed:{positive:function(){return this.ratings.filter(function(t){return t.rateType===o})},negative:function(){return this.ratings.filter(function(t){return t.rateType===s})}}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(2),n=o(i),a=s(1),c=o(a),r=s(48),l=o(r),d=s(3),p=o(d),u=s(41),f=o(u),v=2;e.default={props:{food:{type:Object}},data:function(){return{showFlag:!1,selectType:v,contentSwitch:!0,desc:{all:"全部",positive:"推荐",nagetive:"吐槽"}}},methods:{show:function(){var t=this;this.showFlag=!0,this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new c.default(t.$els.food,{click:!0})})},back:function(){this.showFlag=!1},addCount:function(t){t._constructed&&(this.$dispatch("cart.add",t.target),n.default.set(this.food,"count",1))},showLish:function(t,e){return!(this.contentSwitch&&!e)&&(this.selectType===v||t===this.selectType)}},computed:{showGood:function(){return!!this.showFlag}},components:{split:l.default,cartcontrol:p.default,foodRate:f.default},events:{"ratingType.select":function(t){var e=this;this.selectType=t,this.$nextTick(function(){e.scroll.refresh()})},"contentSwitch.select":function(t){var e=this;this.contentSwitch=t,this.$nextTick(function(){e.scroll.refresh()})}}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(1),n=o(i),a=s(47),c=o(a),r=s(3),l=o(r),d=s(42),p=o(d),u=0;e.default={props:{seller:{type:Object}},data:function(){return{goods:[],listHeight:[],scrollY:0,selectedFood:{}}},components:{shopcart:c.default,cartcontrol:l.default,food:p.default},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.scrollY<s)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(e){e.foods.forEach(function(e){e.count&&t.push(e)})}),t},showGood:function(){return!!this.showFlag}},created:function(){var t=this;this.$http.get("/api/goods").then(function(e){e=e.body,e.errno===u&&(t.goods=e.data,t.$nextTick(function(){t._initScroll(),t._calculateHeight()}))}),this.classMap=["decrease","discount","special","invoice","special"]},methods:{selectMenu:function(t,e){if(e._constructed){var s=this.$els.foodWrapper.getElementsByClassName("food-list-hook"),o=s[t];this.foodScroll.scrollToElement(o,300)}},_initScroll:function(){var t=this;this.menuScroll=new n.default(this.$els.menuWrapper,{click:!0}),this.foodScroll=new n.default(this.$els.foodWrapper,{probeType:3,click:!0}),this.foodScroll.on("scroll",function(e){t.scrollY=Math.abs(Math.round(e.y))})},_calculateHeight:function(){var t=this.$els.foodWrapper.getElementsByClassName("food-list-hook"),e=0;this.listHeight.push(e);for(var s=0;s<t.length;s++){var o=t[s];e+=o.clientHeight,this.listHeight.push(e)}},_drop:function(t){this.$refs.shopcart.drop(t)},selectGood:function(t,e){e._constructed&&(this.selectedFood=t,this.$refs.food.show())}},events:{"cart.add":function(t){var e=this;this.$nextTick(function(){e._drop(t)})}}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(49),n=o(i);e.default={props:{seller:{type:Object}},data:function(){return{detailShow:!1}},methods:{showDetail:function(){this.detailShow=!0},closeDetail:function(){this.detailShow=!1}},created:function(){this.classMap=["decrease","discount","special","invoice","special"]},components:{star:n.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(1),n=o(i),a=s(3),c=o(a);e.default={data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},props:{selectFoods:{type:Array},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},methods:{drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},toggleCart:function(){this.totalCount&&(this.fold=!this.fold)},pay:function(){this.totalPrice<this.minPrice||alert("请付"+this.totalPrice+"元")},empty:function(){for(var t=this.selectFoods,e=0;e<t.length;e++)t[e].count=0},closeMask:function(){this.fold=!0}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.price*e.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},payPrice:function(){if(0===this.totalCount)return"￥"+this.minPrice+"起送";if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差￥"+t+"起送"}return"去结算"},payState:function(){return this.totalPrice<this.minPrice?"noEnough":"enough"},showList:function(){var t=this;if(!this.totalCount)return this.fold=!0,!1;var e=!this.fold;return e&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new n.default(t.$els.listElement,{click:!0})}),e}},transitions:{drop:{beforeEnter:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var o=s.el.getBoundingClientRect(),i=o.left-30,n=-(window.innerHeight-o.top-30);t.style.display="",t.style.webkitTransform="translate3d(0,"+n+"px,0)",t.style.transform="translate3d(0,"+n+"px,0)";var a=t.getElementsByClassName("ball-hook")[0];a.style.webkitTransform="translate3d("+i+"px,0,0)",a.style.transform="translate3d("+i+"px,0,0)"}}},enter:function(t){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("ball-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}},components:{cartcontrol:c.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=5,o="on",i="off",n="half";e.default={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=Math.floor(2*this.score)/2,a=e%1!==0,c=Math.floor(e),r=0;r<c;r++)t.push(o);for(a&&t.push(n);t.length<s;)t.push(i);return t}}}},function(t,e,s){var o,i,n={};s(6),o=s(29),i=s(18),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(8),o=s(31),i=s(20),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(9),o=s(32),i=s(21),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(10),o=s(33),i=s(22),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(11),o=s(34),i=s(23),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(12),o=s(35),i=s(24),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(13),o=s(36),i=s(25),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(14),o=s(37),i=s(26),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(15),o=s(38),i=s(27),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(16),o=s(39),i=s(28),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(n).forEach(function(t){var e=n[t];a.computed[t]=function(){return e}})}]);
//# sourceMappingURL=app.48485f8b231e3f431c12.js.map